(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{628:function(t,s,e){"use strict";e.r(s);var a=e(45),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("blockquote",[e("p",[t._v("ä»¥ä¸‹æ˜¯ä¸€ä»½ã€Œç”±æµ…å…¥æ·±ã€ä¸“ä¸º"),e("strong",[t._v("React èµ„æ·±å‰ç«¯é¢è¯•")]),t._v("å‡†å¤‡çš„ã€ŒReact åº•å±‚æœºåˆ¶ + æºç å¯¼è¯»ã€å¤§çº²ã€‚"),e("br"),t._v("\nå…¨éƒ¨ç”¨"),e("strong",[t._v("é—®ç­”ä½“")]),t._v("å‘ˆç°ï¼Œæ–¹ä¾¿ä½ ç›´æ¥æ‹¿æ¥åš mock-interviewï¼›æ¯æ®µéƒ½æ ‡æ³¨äº†"),e("strong",[t._v("é¢è¯•å®˜è¿½é—®ç‚¹")]),t._v("ä¸"),e("strong",[t._v("æºç å…¥å£")]),t._v("ï¼Œæ—¢èƒ½èƒŒâ€œå…«è‚¡â€ï¼Œä¹Ÿèƒ½çœŸæ­£è¯»ä»£ç ã€‚")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ”§-çƒ­èº«ï¼šjsx-â†’-çœŸå®-ui-åˆ°åº•è·‘äº†å‡ æ­¥ï¼Ÿ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”§-çƒ­èº«ï¼šjsx-â†’-çœŸå®-ui-åˆ°åº•è·‘äº†å‡ æ­¥ï¼Ÿ"}},[t._v("#")]),t._v(" ğŸ”§ çƒ­èº«ï¼šJSX â†’ çœŸå® UI åˆ°åº•è·‘äº†å‡ æ­¥ï¼Ÿ")]),t._v(" "),e("p",[e("strong",[t._v("Q1ï¼šå†™ä¸‹ä¸€è¡Œ "),e("code",[t._v('<Button color="red">Click</Button>')]),t._v("ï¼Œæµè§ˆå™¨é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),e("ol",[e("li",[t._v("è¢« "),e("code",[t._v("@babel/preset-react")]),t._v(" ç¼–è¯‘æˆ"),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Button"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Click'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])]),t._v(" "),e("li",[e("code",[t._v("createElement")]),t._v(" è¿”å›"),e("strong",[t._v("è™šæ‹Ÿ DOM å¯¹è±¡")]),t._v("ï¼ˆ"),e("code",[t._v("$$typeof: Symbol(react.element)")]),t._v("ï¼‰")]),t._v(" "),e("li",[t._v("åœ¨ "),e("code",[t._v("ReactDOM.render(<App />, container)")]),t._v(" é‡Œè¿›å…¥"),e("strong",[t._v("Reconciler")])]),t._v(" "),e("li",[t._v("Reconciler ç”Ÿæˆ"),e("strong",[t._v("Fiber æ ‘")]),t._v("ï¼ŒDiff åæŠŠã€Œå‰¯ä½œç”¨é˜Ÿåˆ—ã€äº¤ç»™ "),e("strong",[t._v("Renderer")])]),t._v(" "),e("li",[t._v("Rendererï¼ˆ"),e("code",[t._v("react-dom")]),t._v("ï¼‰æ‰§è¡Œ DOM å¢åˆ æ”¹ï¼Œæœ€ç»ˆ Paint")])]),t._v(" "),e("blockquote",[e("p",[t._v("è¿½é—®ç‚¹ï¼š"),e("code",[t._v("$$typeof")]),t._v(" å¹²å˜›çš„ï¼Ÿâ†’ é˜²æ­¢ XSSï¼ŒJSON é‡Œæ’ä¸è¿› Symbol")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"âš™ï¸-ç¬¬ä¸€å±‚ï¼šfiber-æ¶æ„æ€»è§ˆï¼ˆ16-ä»¥åçš„æ ¸å¿ƒï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#âš™ï¸-ç¬¬ä¸€å±‚ï¼šfiber-æ¶æ„æ€»è§ˆï¼ˆ16-ä»¥åçš„æ ¸å¿ƒï¼‰"}},[t._v("#")]),t._v(" âš™ï¸ ç¬¬ä¸€å±‚ï¼šFiber æ¶æ„æ€»è§ˆï¼ˆ16+ ä»¥åçš„æ ¸å¿ƒï¼‰")]),t._v(" "),e("p",[e("strong",[t._v("Q2ï¼šä¸ºä»€ä¹ˆé‡å†™ Stack Reconcilerï¼ŸFiber åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("ç›®æ ‡")]),t._v("ï¼šå¯ä¸­æ–­ / å¯æ¢å¤ / ä¼˜å…ˆçº§è°ƒåº¦")]),t._v(" "),e("li",[e("strong",[t._v("æ•°æ®ç»“æ„")]),t._v("ï¼šæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ª Fiber å¯¹è±¡ï¼Œå­—æ®µå…³é”®æœ‰"),e("div",{staticClass:"language-ts line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Fiber "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tag"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" WorkTag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶ç±»å‹ï¼ˆFunction/Class/HostRootâ€¦ï¼‰")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çœŸå®æ„é€ å‡½æ•°")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Fiber "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çˆ¶èŠ‚ç‚¹")]),t._v("\n  child"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Fiber "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹")]),t._v("\n  sibling"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Fiber "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‹ä¸€ä¸ªå…„å¼Ÿ")]),t._v("\n  alternate"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Fiber "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒç¼“å†²ï¼ŒæŒ‡å‘æ—§ fiber")]),t._v("\n  memoizedState"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å·²æ¸²æŸ“çŠ¶æ€ï¼ˆHooks æ—¶å­˜é“¾è¡¨ï¼‰")]),t._v("\n  updateQueue"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mixed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¾…å¤„ç†çš„ setState/useReducer é˜Ÿåˆ—")]),t._v("\n  flags"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Flags"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰¯ä½œç”¨æ ‡è®°ï¼ˆPlacement|Update|Deletionâ€¦ï¼‰")]),t._v("\n  lanes"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Lanes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼˜å…ˆçº§è½¦é“")]),t._v("\n  â€¦\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])])]),t._v(" "),e("li",[e("strong",[t._v("åŒç¼“å†²æœºåˆ¶")]),t._v("ï¼š"),e("br"),t._v("\næ­£åœ¨æ¸²æŸ“çš„ "),e("strong",[t._v("workInProgress")]),t._v(" â†” ä¸Šä¸€æ¬¡æäº¤çš„ "),e("strong",[t._v("current")]),t._v("ï¼›"),e("code",[t._v("alternate")]),t._v(" æŠŠä¸¤æ£µæ ‘è¿èµ·æ¥ï¼Œæäº¤ååŸå­åˆ‡æ¢ "),e("code",[t._v("root.current = workInProgress")]),t._v("ï¼Œå®ç°"),e("strong",[t._v("æ— é”å¹¶å‘")]),t._v("ã€‚")])]),t._v(" "),e("blockquote",[e("p",[t._v("æºç å…¥å£ï¼š"),e("code",[t._v("packages/react-reconciler/src/ReactInternalTypes.js")])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ§µ-ç¬¬äºŒå±‚ï¼šè°ƒåº¦å™¨-scheduler-å¦‚ä½•è®©åŠ¨ç”»ä¸æ‰å¸§ï¼Ÿ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§µ-ç¬¬äºŒå±‚ï¼šè°ƒåº¦å™¨-scheduler-å¦‚ä½•è®©åŠ¨ç”»ä¸æ‰å¸§ï¼Ÿ"}},[t._v("#")]),t._v(" ğŸ§µ ç¬¬äºŒå±‚ï¼šè°ƒåº¦å™¨ Schedulerâ€”â€”å¦‚ä½•è®©åŠ¨ç”»ä¸æ‰å¸§ï¼Ÿ")]),t._v(" "),e("p",[e("strong",[t._v("Q3ï¼šã€Œæ—¶é—´åˆ‡ç‰‡ã€æ€ä¹ˆåšåˆ°çš„ï¼Ÿ")])]),t._v(" "),e("ul",[e("li",[t._v("æµè§ˆå™¨æ¯ä¸€å¸§ 16.6 msï¼ŒReact åªæ‹¿ 5 ms åšè®¡ç®—ï¼Œåˆ°æœŸè®©å‡ºä¸»çº¿ç¨‹")]),t._v(" "),e("li",[t._v("å®ç°é  "),e("code",[t._v("MessageChannel")]),t._v(" / "),e("code",[t._v("setTimeout")]),t._v(" æ¨¡æ‹Ÿã€Œå®ä»»åŠ¡ã€åˆ‡ç‰‡")]),t._v(" "),e("li",[t._v("ä¼˜å…ˆçº§ç”¨ "),e("strong",[t._v("Lanes")]),t._v("ï¼ˆ31 ä½ bitmapï¼‰è¡¨ç¤ºï¼š"),e("br"),t._v("\nä¾‹å¦‚ "),e("code",[t._v("SyncLane = 0b00001")]),t._v(", "),e("code",[t._v("DefaultLane=0b01000")]),t._v(", "),e("code",[t._v("IdleLane=0b10000")])]),t._v(" "),e("li",[t._v("æ ¸å¿ƒå‡½æ•°"),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("workLoopConcurrent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgress "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("shouldYield")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("performUnitOfWork")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgress"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("code",[t._v("shouldYield()")]),t._v(" â†’ æ£€æŸ¥ "),e("code",[t._v("navigator.scheduling.timeRemaining() < 1")])])]),t._v(" "),e("blockquote",[e("p",[t._v("è¿½é—®ç‚¹ï¼šReact18 "),e("code",[t._v("startTransition")]),t._v(" æŠŠæ›´æ–°æ”¾è¿›å“ªä¸ª Laneï¼Ÿâ†’ "),e("code",[t._v("TransitionLane")])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸŒ³-ç¬¬ä¸‰å±‚ï¼šreconcile-é˜¶æ®µï¼ˆå¯ä¸­æ–­ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ³-ç¬¬ä¸‰å±‚ï¼šreconcile-é˜¶æ®µï¼ˆå¯ä¸­æ–­ï¼‰"}},[t._v("#")]),t._v(" ğŸŒ³ ç¬¬ä¸‰å±‚ï¼šReconcile é˜¶æ®µï¼ˆå¯ä¸­æ–­ï¼‰")]),t._v(" "),e("p",[e("strong",[t._v("Q4ï¼šbeginWork / completeWork å¹²äº†å•¥ï¼Ÿ")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("beginWork")]),t._v("ï¼ˆå‘ä¸‹ï¼‰"),e("br"),t._v("\næ ¹æ® "),e("code",[t._v("tag")]),t._v(" åˆ†å‘åˆ°å¯¹åº” "),e("code",[t._v("updateXXXComponent")]),t._v("ï¼Œç”Ÿæˆå­ Fiberï¼Œè°ƒç”¨ "),e("code",[t._v("reconcileChildren")])]),t._v(" "),e("li",[e("strong",[t._v("completeWork")]),t._v("ï¼ˆå‘ä¸Šå†’æ³¡ï¼‰"),e("br"),t._v("\nåˆ›å»ºå¯¹åº” DOM èŠ‚ç‚¹ã€æ‰“å‰¯ä½œç”¨æ ‡è®°ï¼ˆ"),e("code",[t._v("flags |= Placement")]),t._v("ï¼‰ï¼Œæ”¶é›†åˆ° "),e("code",[t._v("subtreeFlags")])])]),t._v(" "),e("blockquote",[e("p",[t._v("æºç æ–‡ä»¶"),e("br"),t._v(" "),e("code",[t._v("packages/react-reconciler/src/ReactFiberBeginWork.js")]),e("br"),t._v(" "),e("code",[t._v("packages/react-reconciler/src/ReactFiberCompleteWork.js")])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ§®-ç¬¬å››å±‚ï¼šdiff-ç®—æ³•ï¼ˆä¸‰ç§-å‡è®¾-ä¿-o-n-ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§®-ç¬¬å››å±‚ï¼šdiff-ç®—æ³•ï¼ˆä¸‰ç§-å‡è®¾-ä¿-o-n-ï¼‰"}},[t._v("#")]),t._v(" ğŸ§® ç¬¬å››å±‚ï¼šDiff ç®—æ³•ï¼ˆä¸‰ç§â€œå‡è®¾â€ä¿ O(n)ï¼‰")]),t._v(" "),e("p",[e("strong",[t._v("Q5ï¼šç»å…¸ä¸‰é—®â€”â€”åŒçº§ã€è·¨å±‚ã€åˆ—è¡¨ï¼Ÿ")])]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("Tree Diff")]),t._v(" åªæ¯”è¾ƒåŒçº§ï¼Œä¸è·¨å±‚ â†’ å¤æ‚åº¦ä» O(nÂ³) â†’ O(n)")]),t._v(" "),e("li",[e("strong",[t._v("Component Diff")]),t._v(" ç±»å‹ä¸åŒç›´æ¥æ•´æ£µç æ‰é‡å»º")]),t._v(" "),e("li",[e("strong",[t._v("Element Diff")]),t._v(" åˆ—è¡¨å¿…é¡»å†™ "),e("code",[t._v("key")]),t._v("ï¼ŒReact ç”¨"),e("strong",[t._v("æ—§ç´¢å¼• â†’ æ–°ç´¢å¼•")]),t._v("æ˜ å°„ï¼Œå°½å¯èƒ½å¤ç”¨")])]),t._v(" "),e("blockquote",[e("p",[t._v("æºç å‡½æ•°ï¼š"),e("code",[t._v("reconcileChildrenArray()")]),t._v(" åœ¨ "),e("code",[t._v("ReactChildFiber.js")]),e("br"),t._v("\nè¿½é—®ç‚¹ï¼šä¸ºä»€ä¹ˆ index åš key ä¼šç¿»è½¦ï¼Ÿâ†’ æ’å…¥ä¸€æ¡åæ‰€æœ‰ index åç§»ï¼Œå¯¼è‡´è¯¯å¤ç”¨")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸª-ç¬¬äº”å±‚ï¼šhooks-å®ç°-usestate-åˆ°åº•å­˜åœ¨å“ªï¼Ÿ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸª-ç¬¬äº”å±‚ï¼šhooks-å®ç°-usestate-åˆ°åº•å­˜åœ¨å“ªï¼Ÿ"}},[t._v("#")]),t._v(" ğŸª ç¬¬äº”å±‚ï¼šHooks å®ç°â€”â€”useState åˆ°åº•å­˜åœ¨å“ªï¼Ÿ")]),t._v(" "),e("p",[e("strong",[t._v("Q6ï¼šFunction Component æ²¡æœ‰å®ä¾‹ï¼ŒçŠ¶æ€æŒ‚åœ¨å“ªé‡Œï¼Ÿ")])]),t._v(" "),e("ul",[e("li",[t._v("æ¯ä¸ª Function ç»„ä»¶å¯¹åº” Fiberï¼Œ"),e("strong",[e("code",[t._v("fiber.memoizedState")]),t._v(" æŒ‡å‘ä¸€æ¡å•å‘é“¾è¡¨")]),e("div",{staticClass:"language-ts line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Hook "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  memoizedState"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰ state")]),t._v("\n  baseState"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èµ·å§‹ stateï¼ˆç”¨äº lanes æ’é˜Ÿï¼‰")]),t._v("\n  queue"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UpdateQueue"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¾…åˆå¹¶çš„ setState å¾ªç¯é“¾è¡¨")]),t._v("\n  next"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Hook "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‹ä¸€ä¸ª hook")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])])]),t._v(" "),e("li",[t._v("è°ƒç”¨é¡ºåºå¿…é¡»ä¸€è‡´ â†’ ä¸ºä»€ä¹ˆã€Œæ¡ä»¶è¯­å¥ä¸­å†™ Hooksã€ä¼šç‚¸ï¼šé“¾è¡¨é¡ºåºå¯¹ä¸ä¸Š")]),t._v(" "),e("li",[e("code",[t._v("useEffect")]),t._v(" ç­‰å‰¯ä½œç”¨å­˜åœ¨ "),e("code",[t._v("fiber.updateQueue")]),t._v(" ä¸­ï¼Œcommit é˜¶æ®µç»Ÿä¸€æ‰§è¡Œ")])]),t._v(" "),e("blockquote",[e("p",[t._v("æºç ï¼š"),e("code",[t._v("packages/react-reconciler/src/ReactFiberHooks.js")])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ“¦-ç¬¬å…­å±‚ï¼šcommit-é˜¶æ®µï¼ˆåŒæ­¥æ‰§è¡Œï¼Œä¸å¯æ‰“æ–­ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“¦-ç¬¬å…­å±‚ï¼šcommit-é˜¶æ®µï¼ˆåŒæ­¥æ‰§è¡Œï¼Œä¸å¯æ‰“æ–­ï¼‰"}},[t._v("#")]),t._v(" ğŸ“¦ ç¬¬å…­å±‚ï¼šCommit é˜¶æ®µï¼ˆåŒæ­¥æ‰§è¡Œï¼Œä¸å¯æ‰“æ–­ï¼‰")]),t._v(" "),e("p",[e("strong",[t._v("Q7ï¼šDOM çœŸæ­£ä»€ä¹ˆæ—¶å€™è¢«æ’å…¥ï¼Ÿ")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("beforeMutation")]),t._v(" â†’ "),e("code",[t._v("getSnapshotBeforeUpdate")])]),t._v(" "),e("li",[e("strong",[t._v("mutation")]),t._v(" â†’ éå† "),e("code",[t._v("effectList")]),t._v(" æ‰§è¡Œ DOM å¢åˆ æ”¹")]),t._v(" "),e("li",[e("strong",[t._v("layout")]),t._v(" â†’ "),e("code",[t._v("useLayoutEffect")]),t._v(", "),e("code",[t._v("componentDidMount/Update")])])]),t._v(" "),e("blockquote",[e("p",[t._v("æ–‡ä»¶"),e("br"),t._v(" "),e("code",[t._v("ReactFiberCommitWork.js")]),e("br"),t._v(" "),e("code",[t._v("ReactFiberWorkLoop.js")]),t._v(" â†’ "),e("code",[t._v("commitRootImpl()")])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ§ª-ç¬¬ä¸ƒå±‚ï¼šconcurrent-featuresï¼ˆreact-18ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§ª-ç¬¬ä¸ƒå±‚ï¼šconcurrent-featuresï¼ˆreact-18ï¼‰"}},[t._v("#")]),t._v(" ğŸ§ª ç¬¬ä¸ƒå±‚ï¼šConcurrent Featuresï¼ˆReact 18ï¼‰")]),t._v(" "),e("p",[e("strong",[t._v("Q8ï¼šSuspense + Server Components æ€ä¹ˆæŠŠâ€œæ°´åˆâ€åšæˆæ¸è¿›å¼ï¼Ÿ")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("createRoot")]),t._v(" å¼€å¯ concurrent æ¨¡å¼ï¼Œæ¸²æŸ“å¯ä¸­æ–­")]),t._v(" "),e("li",[t._v("Suspense è¾¹ç•Œè®© React "),e("strong",[t._v("ç­‰å¾…å­æ ‘å¼‚æ­¥èµ„æº")]),t._v("ï¼ˆfetch, lazyï¼‰æ—¶å…ˆæ¸²æŸ“ fallback")]),t._v(" "),e("li",[e("strong",[t._v("Selective Hydration")]),t._v("ï¼šæœåŠ¡ç«¯æµå¼è¾“å‡º HTMLï¼Œå®¢æˆ·ç«¯æŒ‰äº¤äº’ä¼˜å…ˆçº§** hydrate å¯¹åº”ç»„ä»¶**ï¼Œæœª hydrate å‰äº‹ä»¶ä»£ç†åˆ°çˆ¶çº§")]),t._v(" "),e("li",[t._v("æºç æ–°å¢ "),e("code",[t._v("ReactFizzServer.js")]),t._v("ï¼ˆæœåŠ¡ç«¯æµå¼æ¸²æŸ“ï¼‰"),e("br"),t._v(" "),e("code",[t._v("ReactFiberHydration.js")]),t._v("ï¼ˆæ°´åˆå¯¹æ¯”ï¼‰")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸš‘-ç¬¬å…«å±‚ï¼šè°ƒè¯•æºç æŠ€å·§ï¼ˆç»™é¢è¯•å®˜ç§€è‚Œè‚‰ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš‘-ç¬¬å…«å±‚ï¼šè°ƒè¯•æºç æŠ€å·§ï¼ˆç»™é¢è¯•å®˜ç§€è‚Œè‚‰ï¼‰"}},[t._v("#")]),t._v(" ğŸš‘ ç¬¬å…«å±‚ï¼šè°ƒè¯•æºç æŠ€å·§ï¼ˆç»™é¢è¯•å®˜ç§€è‚Œè‚‰ï¼‰")]),t._v(" "),e("ul",[e("li",[t._v("æœ¬åœ° clone tag å¯¹åº”ç‰ˆæœ¬"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/facebook/react\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" react "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build-for-dev\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])])]),t._v(" "),e("li",[t._v("ç”¨ "),e("code",[t._v("__DEV__")]),t._v(" å¼€å…³ & "),e("code",[t._v("console.log")]),t._v(" è¿½ "),e("code",[t._v("beginWork")])]),t._v(" "),e("li",[t._v("Chrome æ’ä»¶ "),e("strong",[t._v("React DevTools Profiler")]),t._v(" å¯çœ‹ Laneã€ç»„ä»¶è€—æ—¶")]),t._v(" "),e("li",[t._v("VSCode è°ƒè¯•ï¼šæŠŠ "),e("code",[t._v("packages/react")]),t._v(" æ˜ å°„åˆ° "),e("code",[t._v("sourceMap")]),t._v("ï¼Œç›´æ¥æ‰“æ–­ç‚¹è¿› "),e("code",[t._v("react-reconciler")])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ¯-é«˜é¢‘å‹è½´è¿½é—®-æ ‡å‡†ç­”"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é«˜é¢‘å‹è½´è¿½é—®-æ ‡å‡†ç­”"}},[t._v("#")]),t._v(" ğŸ¯ é«˜é¢‘å‹è½´è¿½é—® & æ ‡å‡†ç­”")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("è¿½é—® 1")]),t._v("ï¼š"),e("code",[t._v("setState")]),t._v(" æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ"),e("br"),t._v(" "),e("strong",[t._v("ç­”")]),t._v("ï¼š"),e("strong",[t._v("â€œè¯­ä¹‰ä¸Šæ˜¯å¼‚æ­¥â€")]),t._v("ï¼ŒReact ä¼šæŠŠå¤šæ¬¡è°ƒç”¨åˆå¹¶æˆä¸€æ¬¡æ‰¹é‡æ›´æ–°ï¼›ä½†åœ¨ "),e("code",[t._v("setTimeout")]),t._v("ã€åŸç”Ÿäº‹ä»¶ã€async é‡Œä¼šé€€åŒ–æˆåŒæ­¥ï¼ˆä¸åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ï¼‰ã€‚æºç é‡Œçœ‹ "),e("code",[t._v("ensureRootIsScheduled")]),t._v(" â†’ æ˜¯å¦èµ° "),e("code",[t._v("batchedUpdates")])])]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("è¿½é—® 2")]),t._v("ï¼šä¸ºä»€ä¹ˆ useCallback ä¾èµ–å˜äº†è¿”å›æ–°å‡½æ•°ï¼Œå´ä¸ä¼šè®©å­ç»„ä»¶ä¸€å®šé‡æ¸²æŸ“ï¼Ÿ"),e("br"),t._v(" "),e("strong",[t._v("ç­”")]),t._v("ï¼šå› ä¸ºå­ç»„ä»¶"),e("strong",[t._v("é»˜è®¤ props æµ…æ¯”è¾ƒ")]),t._v("ï¼›å¦‚æœå­ç»„ä»¶ç”¨ "),e("code",[t._v("React.memo")]),t._v(" åŒ…ä¸€å±‚ï¼Œä¸”ä¾èµ–ä¸å˜ï¼Œåˆ™ React è·³è¿‡è¯¥å­æ ‘ï¼ˆ"),e("code",[t._v("bailout")]),t._v(" é€»è¾‘åœ¨ "),e("code",[t._v("beginWork")]),t._v(" çš„ "),e("code",[t._v("checkScheduledUpdateOrContext")]),t._v("ï¼‰")])]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("è¿½é—® 3")]),t._v("ï¼šFiber æ ‘å’Œ Virtual DOM æ ‘æ˜¯åŒä¸€æ£µæ ‘å—ï¼Ÿ"),e("br"),t._v(" "),e("strong",[t._v("ç­”")]),t._v("ï¼šä¸æ˜¯ã€‚Virtual DOM = "),e("code",[t._v("React.createElement")]),t._v(" äº§å‡ºçš„"),e("strong",[t._v("æ™®é€šå¯¹è±¡")]),t._v("ï¼Œæ¯æ¬¡ render ä¼šé‡æ–°åˆ›å»ºï¼›Fiber æ˜¯"),e("strong",[t._v("æŒä¹…åŒ–æ•°æ®ç»“æ„")]),t._v("ï¼Œè·¨æ¸²æŸ“å¤ç”¨ï¼Œç”¨äºå­˜çŠ¶æ€ã€å‰¯ä½œç”¨ã€é˜Ÿåˆ—ç­‰")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"ğŸ“„-ä¸€å¥è¯æ”¶ä¸ªå°¾ï¼ˆé¢è¯•ä¸‡èƒ½é‡‘å¥ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“„-ä¸€å¥è¯æ”¶ä¸ªå°¾ï¼ˆé¢è¯•ä¸‡èƒ½é‡‘å¥ï¼‰"}},[t._v("#")]),t._v(" ğŸ“„ ä¸€å¥è¯æ”¶ä¸ªå°¾ï¼ˆé¢è¯•ä¸‡èƒ½é‡‘å¥ï¼‰")]),t._v(" "),e("blockquote",[e("p",[t._v("â€œä» JSX åˆ°åƒç´ ï¼ŒReact ç”¨"),e("strong",[t._v("è™šæ‹Ÿ DOM + åŒç¼“å†² Fiber")]),t._v("æŠŠâ€˜å£°æ˜å¼â€™å˜æˆâ€˜å¯ä¸­æ–­æŒ‡ä»¤â€™ï¼Œå†ç”¨"),e("strong",[t._v("Scheduler")]),t._v("æŠŠæŒ‡ä»¤åˆ‡ç‰‡å–‚ç»™æµè§ˆå™¨ï¼Œ"),e("strong",[t._v("Commit")]),t._v(" é˜¶æ®µä¸€æ¬¡æ€§åŒæ­¥åˆ·åˆ° DOMï¼›"),e("br"),t._v("\nç†è§£è¿™å¥—æµç¨‹ï¼Œå°±èƒ½è§£é‡Šæ‰€æœ‰æ€§èƒ½é™·é˜±ã€Hook è§„åˆ™ã€Concurrent ç‰¹æ€§ï¼Œç”šè‡³è¯»æºç ä¸å†è¿·è·¯ã€‚â€")])]),t._v(" "),e("p",[t._v("ç¥ä½ é¢è¯•ä¸€åˆ€æ¸…å±ï¼")])])}),[],!1,null,null,null);s.default=n.exports}}]);